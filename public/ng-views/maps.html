
<!--SCENARIO MANAGER MENU -->

<div class="topnav">
  <div class="fa-stack" ng-click="managerView=true">
    <i class="fa fa-stop fa-stack-2x"></i>
    <i class="fa fa-bars fa-stack-1x fa-inverse"></i>
  </div>
</div>



<!--SCENARIO SCORECARD -->

<div class="topcol left">
  <div class="topleft" style="background-color:#216C2A" ng-show="scenarioScorecard">
    <h4>
      Scenario Scorecard
      <i class="fa fa-times-circle-o pull-right" ng-click="scenarioScorecard=false"></i>
    </h4>
    <div class="topinfo-body container" style="min-height:250px">

      <div class="pull-left" style="width: 100%; padding-right: 325px;">
        <div class="row">
          <div class="col-xs-5">
            <h3>
              <i class="fa fa-dot-circle-o"></i> {{ scenarioScore.bus.count }}
              <h6>Bus Stops</h6>
            </h3>
          </div>
          <div class="col-xs-6">
            <h3>
              <i class="fa fa-usd"></i> {{ scenarioScore.bus.cost/1000000 | number:2 }}M
              <h6>All Stations</h6>
            </h3>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-5">
            <h3>
              <i class="fa fa-road"></i> {{ scenarioScore.length.count | number:1 }}
              <h6>Miles</h6>
            </h3>
          </div>
          <div class="col-xs-6">
            <h3>
              <i class="fa fa-usd"></i> {{ scenarioScore.length.cost/1000000 | number:2 }}M
              <h6>All Lanes</h6>
            </h3>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-5">
            <h3>
              <i class="fa fa-bus"></i> {{ scenarioScore.vehicles.count }}
              <h6>Vehicles</h6>
            </h3>
          </div>
          <div class="col-xs-6">
            <h3>
              <i class="fa fa-usd"></i> {{ scenarioScore.vehicles.cost/1000000 | number:2 }}M
              <h6>Operations</h6>
            </h3>
          </div>
        </div>
      </div>

      <div style="height: 250px; position: absolute; right: 0px">
        <svg id="compPlot" width="350" height="200"></svg>
        <center><h6>Accessibility to all Job Types</h6></center>
      </div>

    </div>
  </div>

  <div class="topleft topinfo" ng-show="managerView">
    <h4>
      Manger Controls
      <i class="fa fa-times-circle-o pull-right" ng-click="managerView=false"></i>
    </h4>
    <div class="topinfo-body container">
      <h6>
        Click to auto create baseline and gold standard scenarios. <span class="badge" ng-click="test()">Run Create</span>
      </h6>
    </div>
  </div>
</div>




<div class="topcol right">

<!--ROUTE SCORECARD -->

  <div class="topleft" style="background-color:#216C2A" ng-show="routeScorecard" >
    <h4>
      Route Scorecard
      <i class="fa fa-times-circle-o pull-right" ng-click="routeScorecard=false"></i>
    </h4>
    <div class="topinfo-body container">

      <div class="row">
        <div class="col-xs-3">
          <h2>
            <i class="fa fa-dot-circle-o"></i> {{ routeScore.bus.count }}
            <h6>Bus Stops</h6>
          </h2>
        </div>
        <div class="col-xs-4">
          <h5>
            <b>Standard:</b> {{ routeScore.bus.dist[0] | convertPercentage | number:0 }}%
          </h5>
          <h5>
            <b>Platform:</b> {{ routeScore.bus.dist[1] | convertPercentage | number:0 }}%
          </h5>
          <h5>
            <b>BRT Station:</b> {{ routeScore.bus.dist[2] | convertPercentage | number:0 }}%
          </h5>
        </div>
        <div class="col-xs-5">
          <h2>
            <i class="fa fa-usd"></i> {{ routeScore.bus.cost | number:0 }}
            <h6>Cost of stations construction</h6>
          </h2>
        </div>
      </div>

      <div class="row">
        <div class="col-xs-3">
          <h2>
            <i class="fa fa-road"></i> {{ routeScore.length.count | number:1 }}
            <h6>Miles Round-Trip</h6>
          </h2>
        </div>
        <div class="col-xs-4">
          <br>
          <h5>
            <b>Non-dedicated:</b> {{ routeScore.length.dist.non | convertPercentage | number:0 }}%
          </h5>
          <h5>
            <b>Dedicated:</b> {{ routeScore.length.dist.ded | convertPercentage | number:0 }}%
          </h5>
        </div>
        <div class="col-xs-5">
          <h2>
            <i class="fa fa-usd"></i> {{ routeScore.length.cost | number:0 }}
            <h6>Dedicated lane construction</h6>
          </h2>
        </div>
      </div>

      <div class="row">
        <div class="col-xs-3">
          <h2>
            <i class="fa fa-clock-o"></i> {{ routeScore.time.count | minuteConverter }}
            <h6>Peak Round-Trip</h6>
          </h2>
        </div>
        <div class="col-xs-4">
          <br>
          <h5>
            <b>Moving:</b> {{ routeScore.time.dist.move | convertPercentage | number:0 }}%
          </h5>
          <h5>
            <b>Loading:</b> {{ routeScore.time.dist.load | convertPercentage | number:0 }}%
          </h5>
        </div>
        <div class="col-xs-5">
        </div>
      </div>

      <div class="row">
        <div class="col-xs-3">
          <h2>
            <i class="fa fa-bus"></i> {{ routeScore.vehicles.count }}
            <h6>Vehicles</h6>
          </h2>
        </div>
        <div class="col-xs-4">
        </div>
        <div class="col-xs-5">
          <h2>
            <i class="fa fa-usd"></i> {{ routeScore.vehicles.cost | number:0 }}
            <h6>Annual Cost of Operations</h6>
          </h2>
        </div>
      </div>
    </div>
  </div>


  <!--ROUTE INFO PROMPT-->

  <div class="topleft" style="background-color: #{{ targetFeature.properties.routeColor }}" ng-show="targetFeature.properties">
    <h4>
      {{ targetFeature.properties.varName }} allignment
      <i class="fa fa-times-circle-o pull-right" ng-click="updateTargetFeature()"></i>
    </h4>
    <div class="topinfo-body container">
      <h6>
        This is variation adopts the {{ targetFeature.properties.varName }} allignment. The {{ targetFeature.properties.varName }} allignment runs along the {{ targetFeature.properties.corLonName }} corridor ({{ targetFeature.properties.corName }}). This particular path is {{ targetFeature.properties.length | number:2 }} miles long.
      </h6>

      <h6 ng-show="targetFeature.alternatives">
        There are {{ targetFeature.alternatives.length/2 + variants[tabnav].length }} path alternatives along this corridor. {{ variants[tabnav].all | keyLength }} variations, based off of these route path alternatives, have been created this session. They are: 
        <span ng-repeat="(key, variant) in variants[tabnav].all">
          <span class="badge"  style="color: #{{ targetFeature.properties.routeColor }}" 
                ng-click="updateTargetFeature(variant)">
            {{ variant.name }}
          </span>
        </span>
      </h6>
      
      <button class="btn btn-choose pull-right" type="button" 
              ng-show="scenario[tabnav].routeId !== targetFeature.properties.routeId"
              ng-click="scenario[targetFeature.properties.corName].routeId = targetFeature.properties.routeId;
                        createVar=true" 
              style="background-color: #{{ targetFeature.properties.routeColor }}">
        Use this path for the {{ targetFeature.properties.corLonName }} corridor
      </button>

      <button class="btn btn-choose pull-right" type="button" 
              ng-show="scenario[targetFeature.properties.corName].routeId == targetFeature.properties.routeId"
              style="background-color: #{{ targetFeature.properties.routeColor }}">
        <i class="fa fa-check"></i>
        Path selected
      </button>
    </div>
  </div>


  <!--SAVE-ROUTE PROMPT-->

  <div class="topleft saveAlt" ng-show="saveAlt">
    <h4>
      Save this variation of the {{ routes[scenario[tabnav].routeId][0].options.base.varName }} path
      <i class="fa fa-times-circle-o pull-right" ng-click="saveAlt=false"></i>
    </h4>
    <div class="topinfo-body container">
      <h6 ng-if="scenario[tabnav].routeId">
        This alternative route variation is based off of the path for route {{ routes[scenario[tabnav].routeId][0].options.base.varName }} within the {{ routes[scenario[tabnav].routeId][0].options.base.corLonName }} corridor.
      </h6>
      <h6 ng-if="!scenario[tabnav].routeId">
        You have not selected a path from the available options for this route. To select a path variation, choose from the available variations on the underlying map.
      </h6>
      <h6>
        Your alternative for Route {{ tabnav }} has installed
        <span ng-if="scenario[tabnav].station == 0">
          traditional standard bus stops.
        </span>
        <span ng-if="scenario[tabnav].station == 1">
          bus stops enhanced with raised platforms.
        </span>
        <span ng-if="scenario[tabnav].station == 2">
          BRT bus stations that feature both raised platforms and preboarding fare purchasing
        </span>
        Peak frequencies along your alternative of Route {{ tabnav }} have been set to {{ scenario[tabnav].peak.min }}:{{ scenario[tabnav].peak.sec | integerLength }} between arrivals. Off-peak frequencies have been set to {{ scenario[tabnav].offpeak.min }}:{{ scenario[tabnav].offpeak.sec | integerLength }} between arrivals. Complete the field below to add this alternative to Route {{ tabnav }}.
      </h6>
      <div class="input-group">
        <input type="text" class="form-control" ng-model="scenario[tabnav].name" placeholder="Name your alternative for Route {{ tabnav }}...">
        <span class="input-group-btn">
          <button class="btn btn-savealt" type="button" 
            ng-show="!scenario[tabnav].name" 
            style="cursor:not-allowed">
            Save Variation
          </button>
          <button class="btn btn-savealt" type="button" 
            ng-click="saveAlt=false; newVariant(tabnav, true)" 
            ng-show="scenario[tabnav].name && scenario[tabnav].routeId">
            Save Variation
          </button>
        </span>
      </div>
    </div>
  </div>
</div>


<!--SAVE-SCENARIO PROMPT-->

<div class="topcol left">
  <div class="topleft saveAlt" ng-show="saveCombo">
    <h4>
      Save this scenario alternative
      <i class="fa fa-times-circle-o pull-right" ng-click="saveCombo=false"></i>
    </h4>
    <div class="topinfo-body container">
      <h6>
        Of the four routes customizable in this model, the following are included in this scenario:
      </h6>
      <h6 ng-repeat="(key, variant) in variants" ng-show="variant.sel">
        <b class="badge" style="color: #{{ routes[variant.all[variant.sel].routeId][0].options.base.routeColor }}">
          {{ variant.all[variant.sel].name }}: 
        </b>
        The station type used along this routes is a
        <span ng-if="variant.all[variant.sel].station == 0">
          standard bus stop.
        </span>
        <span ng-if="variant.all[variant.sel].station == 1">
          raised platform.
        </span>
        <span ng-if="variant.all[variant.sel].station == 2">
          BRT station.
        </span>
        Peak service operates with an average wait time of {{ variant.all[variant.sel].peak.min | avgWaitTime }} minutes, while 
        off-peak service operates with an average wait time of {{ variant.all[variant.sel].offpeak.min | avgWaitTime }} minutes.
      </h6>
      <div class="input-group">
        <input type="text" class="form-control" ng-model="comboName" placeholder="Enter a name for this scenario...">
        <span class="input-group-btn">
          <button class="btn btn-savealt" type="button" 
            ng-show="!comboName"
            style="cursor:not-allowed" disabled>
            Save Scenario Combination
          </button>
          <button class="btn btn-savealt" type="button" 
            ng-show="comboName"
            ng-click="newCombo(comboName); saveCombo=false">
            Save Scenario Combination
          </button>
        </span>
      </div>
    </div>
  </div>
</div>



<leaflet  center   = "center_left"
          defaults = "defaults_left"
          id       = "map_left"
          tiles    = "tiles_left"
          markers  = "markers_left"
          >
</leaflet>
<leaflet  center   = "center_right"
          defaults = "defaults_right"
          id       = "map_right"
          tiles    = "tiles_right"
          >
</leaflet>

<!--PROGRESS BAR --> 

  <div class="progress" ng-show="loadProgress.vis">
    <div class="progress-bar progress-bar-info progress-bar-striped active" 
          role="progressbar"  id="isosProgressBar"
          style="width:{{loadProgress.val}}%">
      {{loadProgress.val}}%
    </div>
  </div>



<!--CONTROL PANEL - 1. POI MARKER ACTIVATION --> 

<div class="controlPanel">
   
    <div class="content" style="width:40px">
      <div class="header">
        <i class="fa fa-users" ng-click="targetPOIUsers(); poiUserDots = !poiUserDots">
        </i>
      </div>
        <span ng-show="poiUserDots">
          <span class="fa-stack userDot" 
                ng-repeat="user in poiUsers track by $index" 
                ng-click="targetPOIUsers(user.name)" 
                ng-class="user.name == currentPOIUser ? '' : 'dot-unselected'"
                style="color:#{{ user.color }}">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-stack-1x fa-inverse">
              <small>{{ user.name }}</small>
            </i>
          </span>
        </span>
  
  </div>

<!--CONTROL PANEL - 2. DESTINATION & TIME FILTER --> 
 
  <div class="content" style="width: {{editorWidth}}">
    <div class="header">
    Travel Preference
    </div>   
    <div class="subHeader">
      TRAVEL TIME: 
    </div>
    <div style="margin-bottom: 8px">
      <span ng-click="toggleShowVectorIsos()">
        <span class="badge">
            <i class="fa fa-eye" ng-show="showVectorIsosOn"></i>
            <i class="fa fa-eye-slash" ng-show="!showVectorIsosOn"></i>
        </span>
        {{ vectorIsos.val*5 | minuteConverter }}   
      </span>
      <span class="text-center" ng-class="showVectorIsosOn ? '' : 'unselected'">
        <i class="fa fa-minus-square" 
            ng-click="vectorTimeVal_subtract(); showVectorIsos(300*vectorIsos.val)"></i>
        <span style="width:50%;display:inline-block">
          <input type="range" min="1" max="24" class="isosRangeBar" style="top:10px; margin-top:8px; margin-bottom:-4px"
            ng-model="vectorIsos.val"
            ng-disabled="!showVectorIsosOn"
            ng-click="showVectorIsos(300*vectorIsos.val)"/>
        </span>
        <i class="fa fa-plus-square" 
            ng-click="vectorTimeVal_add(); showVectorIsos(300*vectorIsos.val)"></i>
      </span>
    </div>
  
    <div class="subHeader"> DESTINATIONS </div>
      <label class="btn iconContainer">
             <i class="fa fa-briefcase fa-fw destinationIcon"></i>
      </label>
      <label  class="btn iconContainer">
             <i class="fa fa-heartbeat fa-fw destinationIcon"></i>
      </label>
      <label  class="btn iconContainer">
            <i class="fa fa-shopping-cart fa-fw destinationIcon"></i>
      </label>
      <label  class="btn iconContainer">
            <i class="fa fa-graduation-cap fa-fw destinationIcon"></i>
      </label>
     
    <br>

    <div class="subHeader"> MODE </div>
      
      <label class="btn iconContainer">
             <i class="fa fa-bus destinationIcon"></i>
      </label>
      <label class="btn iconContainer">
             <i class="fa fa-bicycle destinationIcon"></i>
      </label>
      <label class="btn iconContainer">
             <i class="fa fa-child destinationIcon"></i>
      </label>
      <label class="btn iconContainer">
             <i class="fa fa-ship destinationIcon"></i>
      </label>
     
  </div>
  
  
<!--CONTROL PANEL - 3. SCENARIO TABLE MODULE --> 

  <div class="content" style="width: {{tableWidth}} ">
    <div class="header">
      Scenarios
    </div>

  <!-- <div class="dashboard">
    <h6 style="margin-bottom: -5px; color: red;" ng-click="combosView=!combosView">
      <span ng-show="!combos.sel">
        Existing MBTA System
      </span>
      <span ng-show="combos.sel">
        Scenario {{ combos.all[combos.sel].name }}
        <span ng-show="scenarioCompare">
          <span ng-show="combos.com">
            Compared with {{ combos.all[combos.com].name }}
          </span>
          <span ng-show="!combos.com">
            Compared with Baseline MBTA System
          </span>
        </span>
      </span>
    </h6>
  </div> -->

     <!--  <span ng-show="scenarioCompare">
        Click right <i class="fa fa-circle-o"></i> to compare. Leave all blank for baseline.
      </span>
      <span ng-show="!scenarioCompare">
        Select a scenario to perform a single point analysis.
      </span> -->
      
       <!--  <span class="badge badgeScorecard" ng-click="scenarioScorecard = !scenarioScorecard; updateScenarioScorecard(combos.sel)">
          Scorecard
        </span>

        <span class="badge" ng-show="scenarioCompare" ng-click="scenarioCompare=false; combos.com=null">
          Toggle Compare <i class="fa fa-toggle-on"></i>
        </span>
        
        <span class="badge" ng-show="!scenarioCompare" ng-click="scenarioCompare=true">
          Toggle Compare <i class="fa fa-toggle-off"></i>
        </span>
        
        <span class="badge pull-right" ng-click="saveCombo=!saveCombo">
          <i class="fa fa-cloud-upload"> </i> Save Scenario
        </span> -->

        <span class="subHeaderClickable" ng-click="scenarioScorecard = !scenarioScorecard; updateScenarioScorecard(combos.sel)">
          Scorecard
        </span>

        <span class="subHeaderClickable" ng-show="scenarioCompare" ng-click="scenarioCompare=false; combos.com=null">
          Toggle Compare <i class="fa fa-toggle-on"></i>
        </span>
        
        <span class="subHeaderClickable" ng-show="!scenarioCompare" ng-click="scenarioCompare=true">
          Toggle Compare <i class="fa fa-toggle-off"></i>
        </span>
        
        <span class="subHeaderClickable" ng-click="saveCombo=!saveCombo">
          <i class="fa fa-cloud-upload"> </i> Save Scenario
        </span>
  

    <table class="table table-condensed table-hover">
      <thead>
        <tr>
          <th><i class="fa fa-check-square"></i></th>
          <th>Name</th>
          <th>Blue Hill</th>
          <th>Hyde Park</th>
          <th>Harvard-Dudley</th>
          <th>Sullivan-Dudley</th>
          <th><i class="fa fa-arrows-h"></i></th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat = "variant in combos.all | toArray | orderBy:'created'">
          <td>
            <i  class = "fa fa-square-o" 
                ng-show="combos.sel !== variant._key" 
                ng-click="updateLeftRoutes(variant._key); combos.com=null; $event.stopPropagation()"></i>
            <i  class = "fa fa-check-square" 
                ng-show="combos.sel == variant._key"
                ng-click="updateLeftRoutes(); combos.com=null; $event.stopPropagation()"></i>
          </td>
          <td>{{ variant.name }}</td>
          <td>
            <span class="text-success" ng-show="variant.sel['BH']">
              <i class="fa fa-check"></i>
              <small><i>{{ variants['BH'].all[variant.sel['BH']].name }}</i></small>
            </span>
            <span class="text-danger" ng-show="!variant.sel['BH']">
              <i class="fa fa-times"></i>
              <small><i>None selected</i></small>
            </span>
          </td>
          <td>
            <span class="text-success" ng-if="variant.sel['HP']">
              <i class="fa fa-check"></i>
              <small><i>{{ variants['HP'].all[variant.sel['HP']].name }}</i></small>
            </span>
            <span class="text-danger" ng-if="!variant.sel['HP']">
              <i class="fa fa-times"></i>
              <small><i>None selected</i></small>
            </span>
          </td>
          <td>
            <span class="text-success" ng-if="variant.sel['HD']">
              <i class="fa fa-check"></i>
              <small><i>{{ variants['HD'].all[variant.sel['HD']].name }}</i></small>
            </span>
            <span class="text-danger" ng-if="!variant.sel['HD']">
              <i class="fa fa-times"></i>
              <small><i>None selected</i></small>
            </span>
          </td>
          <td>
            <span class="text-success" ng-if="variant.sel['CT']">
              <i class="fa fa-check"></i>
              <small><i>{{ variants['CT'].all[variant.sel['CT']].name }}</i></small>
            </span>
            <span class="text-danger" ng-if="!variant.sel['CT']">
              <i class="fa fa-times"></i>
              <small><i>None selected</i></small>
            </span>
          </td>
          <td ng-show="scenarioCompare && combos.sel !== variant._key">
            <i  class = "fa fa-circle-o" 
                ng-show="combos.com !== variant._key" 
                ng-click="combos.com=variant._key; $event.stopPropagation()"></i>
            <i  class = "fa fa-check-circle" 
                ng-show="combos.com == variant._key"
                ng-click="combos.com=null; $event.stopPropagation()"></i>
          </td>
          <td ng-show="!scenarioCompare || combos.sel == variant._key">
            <i class="fa fa-ban"></i>
          </td>
        </tr>
      </tbody>
    </table>
  </div>



<!--CONTROL PANEL - 4. ROUTE SELECTOR MODULE--> 

  <div class="content" style="width: 40px">
    <div class="header">
      <i class="fa fa-bus"></i>
    </div>
   
    <span class="fa-stack" 
          ng-click="targetCorridor('BH'); 
                    tabnav='BH'; overview=true"
          ng-class="tabnav !== 'BH' ? 'dot-unselected' : ''"
          style="color:#0071CA">
      <i class="fa fa-circle fa-stack-2x"></i>
      <i class="fa fa-stack-1x fa-inverse">
        <small>BH</small>
      </i>
    </span>

    <span class="fa-stack" 
          ng-click="targetCorridor('HP'); 
                    tabnav='HP'; overview=true"
          ng-class="tabnav !== 'HP' ? 'dot-unselected' : ''"
          style="color:#B10086">
      <i class="fa fa-circle fa-stack-2x"></i>
      <i class="fa fa-stack-1x fa-inverse">
        <small>HP</small>
      </i>
    </span>

    <span class="fa-stack" 
          ng-click="targetCorridor('HD'); 
                    tabnav='HD'; overview=true"
          ng-class="tabnav !== 'HD' ? 'dot-unselected' : ''"
          style="color:#CE5504">
      <i class="fa fa-circle fa-stack-2x"></i>
      <i class="fa fa-stack-1x fa-inverse">
        <small>HD</small>
      </i>
    </span>

    <span class="fa-stack" 
          ng-click="targetCorridor('CT'); 
                    tabnav='CT'; overview=true"
          ng-class="tabnav !== 'CT' ? 'dot-unselected' : ''"
          style="color:#AD0101">
      <i class="fa fa-circle fa-stack-2x"></i>
      <i class="fa fa-stack-1x fa-inverse">
        <small>CT</small>
      </i>
    </span> 
   
  </div>  


<!--CONTROL PANEL - 5. ROUTE TABLE MODULE--> 

  <div class="content" style="width: {{tableWidth}}"> 
    <div class="header">
      Route Summary
    </div>
    <div class="col-xs-12 body">
      <h6 ng-show="variants[tabnav].sel">
        <span class="badge pull-right" style="color: #{{ routes[variants[tabnav].all[variants[tabnav].sel].routeId][0].options.base.routeColor }}"
              ng-click="updateRouteScorecard(scenario[tabnav].routeId, tabnav); routeScorecard=!routeScorecard">       
          Route Scorecard
        </span>

        <span>
          {{ variants[tabnav].all[variants[tabnav].sel].name }} has been selected as the {{ routes[variants[tabnav].all[variants[tabnav].sel].routeId][0].options.base.corLonName }} corridor variant.
        </span>
      </h6>

      <span ng-show="!variants[tabnav].sel" style="color:red">
        <h6>
          <i class="fa fa-exclamation-triangle"></i> No path selected for {{ tabnav }}. <small>This route will be exluded from model right.</small>
        </h6>
      </span>

      <table class="table table-condensed table-hover">
        <thead>
          <tr>
            <th><i class="fa fa-check-square"></i></th>
            <th>Name</th>
            <th>Station Type</th>
            <th>Peak</th>
            <th>
              Off-Peak
            </th>
          </tr>
        </thead>
        
        <tbody>
          <tr ng-repeat    = "variant in variants[tabnav].all | toArray | orderBy:'created'"
              ng-click     = "updateTargetFeature(variant)">
            <td>
              <i  class = "fa fa-square-o" 
                  ng-show="variants[tabnav].sel !== variant._key" 
                  ng-click="setSelectedVariant(tabnav, variant._key);
                            updateRouteScorecard(scenario[tabnav].routeId, tabnav);
                            $event.stopPropagation()"></i>
              <i  class = "fa fa-check-square" 
                  ng-show="variants[tabnav].sel == variant._key"
                  ng-click="setSelectedVariant(tabnav, null);
                            updateRouteScorecard();
                            $event.stopPropagation()"></i>
            </td>
            <td>{{ variant.name }}</td>
            <td>
              <span ng-if="variant.station == 0">
                Standard 
              </span>
              <span ng-if="variant.station == 1">
                Raised Platform  
              </span>
              <span ng-if="variant.station == 2">
                BRT Station 
              </span>
            </td>
            <td>
              {{ variant.peak.min | avgWaitTime }}
            </td>
            <td>
              {{ variant.offpeak.min | avgWaitTime }}
            </td>
            <td class="text-right">
              <span ng-show="scenario[tabnav].routeId !== variant.routeId"
                    ng-click="scenario[tabnav].routeId = variant.routeId; createVar=true">
                <i class="fa fa-circle-o"></i>
              </span>
              <span ng-show="scenario[tabnav].routeId == variant.routeId">
                <i class="fa fa-circle"></i>
              </span>
            </td>
          </tr>
        </tbody>
        <tbody>
          <tr>
            <td>
              <i class="fa fa-sliders"></i>
            </td>
            <td><b>Current Scenario</b></td>
            <td>
              <span ng-if="scenario[tabnav].station == 0">
                Standard 
              </span>
              <span ng-if="scenario[tabnav].station == 1">
                Raised Platform  
              </span>
              <span ng-if="scenario[tabnav].station == 2">
                BRT Station 
              </span>
            </td>
            <td>
              {{ scenario[tabnav].peak.min | avgWaitTime }}
            </td>
            <td>
              {{ scenario[tabnav].offpeak.min | avgWaitTime }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>


<!--CONTROL PANEL - 6. ROUTE EDITOR MODULE--> 

  




  <div class="content" style="width: {{editorWidth}}"> 
    <div class="header">
      Service Editor
    </div>
   
    <div class="subHeader"> AVG WAIT TIME </div>
    <div class="serviceLabel">Peak</div>
      <div class="dashboard">
        <h3 class="noTopMargin noBottomMargin">
              {{ scenario[tabnav].peak.min | avgWaitTime }}
        </h3>
      </div>
     
      <div class="serviceFrequency">
          <input type="range" min="1" max="30" value="5"  class="input-sm"
                      ng-model="scenario[tabnav].peak.min"
                      ng-click="updateOffPeakVal(scenario[tabnav].peak.min, tabnav);
                                updateRouteScorecard(scenario[tabnav].routeId, tabnav)"/>
      </div>
      
    
      <div class="serviceLabel">Off-Peak</div>
        <div class="dashboard">
          <h3 class="noTopMargin noBottomMargin">
                {{ scenario[tabnav].offpeak.min | avgWaitTime }}
          </h3>
        </div>
         
          <div class="serviceFrequency">
            <input type="range" min="1" max="30" value="10" class="input-sm"
                        ng-model="scenario[tabnav].offpeak.min"
                        ng-click="updateOffPeakVal(scenario[tabnav].peak.min, tabnav);
                                  updateRouteScorecard(scenario[tabnav].routeId, tabnav)"/>
          </div>
        
     
    <div class="subHeader"> STATION TYPE </div>
      <div class="btn-group btn-group-justified">
        <label  class="btn btn-info" btn-radio="0" 
                ng-model="scenario[tabnav].station" 
                ng-click="scenario[tabnav].station=0;
                          updateRouteScorecard(scenario[tabnav].routeId, tabnav)">
          <img class="stationIcons" src="public/imgs/pole_black_yellow.svg">
          Normal
        </label>
        <label  class="btn btn-info" btn-radio="1"
                ng-model="scenario[tabnav].station" 
                ng-click="scenario[tabnav].station=1;
                          updateRouteScorecard(scenario[tabnav].routeId, tabnav)">
          <img class="stationIcons" src="public/imgs/platform_black_yellow.svg">
          Platform
        </label>
        <label  class="btn btn-info" btn-radio="2"
                ng-model="scenario[tabnav].station" 
                ng-click="scenario[tabnav].station=2;
                          updateRouteScorecard(scenario[tabnav].routeId, tabnav)">
          <img class="stationIcons" src="public/imgs/brt_black_yellow.svg">
          BRT
        </label>

        <label class="btn btn-success" ng-click="saveAlt=true; createVar=false">
          <i class="fa fa-cloud-upload"></i> Save
        </label>

      </div>
      
      </div>
     
  </div>
</div>

